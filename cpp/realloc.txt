/*
 * 题目2：编写一个程序，首先使用malloc分配一个整型数组的空间，并填充一些初始值。
 * 然后，使用realloc增加数组的大小，并再次填充新分配的部分。
 * 最后，打印出整个数组的内容。最后使用 free 释放内存。
 */
 
#include <iostream>
using namespace std;

int main() {
	
	cout << "请输入数组长度： " ;
	
	int n;
	cin >> n;
	
	if (n <= 0 || n > 100) {
		cout << "输入的 n 不合法，请重新输入。" << endl;
		return -1;
	}
	
	int* arr = (int*)malloc(n * sizeof(int));
	
	if (arr == NULL) {
		cout << "malloc failed!" << endl;
		return -1;
	}
	
	cout << "填充数组: " << endl;
	
	for (int i = 0; i < n; i++) {
		cin >> arr[i];
	}
	
	for (int i = 0; i < n; i++) {
		cout << arr[i] << " ";
	}
	
	
	cout << "数组长度重新分配: ";
	int newlen;
	cin >> newlen;
	if (newlen <= n || newlen > 100) {
		cout << "输入的长度不合法，请重新输入。" << endl;
		free(arr);
		arr = NULL;
		return -1;
	}
	
	int* tmp = (int*)realloc(arr, newlen * sizeof(int));
	
	if (tmp == NULL) {
		cout << "realloc failed!" << endl;
		free(arr);
		arr = NULL;
		return -1;
	} else {
		arr = tmp;
	}
	
	cout << "填充数组: " << endl;
	for (int i = n; i < newlen; i++) {
		cin >> arr[i];
	}
	
	for (int i = 0; i < newlen; i++) {
		cout << arr[i] << " "; 
	}
	cout << endl;
	
	free(arr);
	return 0;
}